!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).VuePeerJS=r()}(this,function(){"use strict";var e=function(e){return"function"==typeof e},r=function(e){return e&&e.length<=1?e[0]:e},n=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e){return r.reduce(function(e,r){return r(e)},e)}},t=function(e){return function(r){return e+r}},o=function(e,r){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");r=Object.assign({pascalCase:!1},r);var n;return 0===(e=Array.isArray(e)?e.map(function(e){return e.trim()}).filter(function(e){return e.length}).join("-"):e.trim()).length?"":1===e.length?r.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=function(e){for(var r=!1,n=!1,t=!1,o=0;o<e.length;o++){var c=e[o];r&&/[a-zA-Z]/.test(c)&&c.toUpperCase()===c?(e=e.slice(0,o)+"-"+e.slice(o),r=!1,t=n,n=!0,o++):n&&t&&/[a-zA-Z]/.test(c)&&c.toLowerCase()===c?(e=e.slice(0,o-1)+"-"+e.slice(o-1),t=n,n=!1,r=!0):(r=c.toLowerCase()===c&&c.toUpperCase()!==c,t=n,n=c.toUpperCase()===c&&c.toLowerCase()!==c)}return e}(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,r){return r.toUpperCase()}).replace(/\d+(\w|$)/g,function(e){return e.toUpperCase()}),n=e,r.pascalCase?n.charAt(0).toUpperCase()+n.slice(1):n)},c=o,i=o;c.default=i;var a=Object.freeze({actionPrefix:"peer_",mutationPrefix:"PEER_",eventToMutationTransformer:function(e){return e.toUpperCase()},eventToActionTransformer:c});function u(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function f(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function l(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},c=Object.keys(e);for(t=0;t<c.length;t++)n=c[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(t=0;t<c.length;t++)n=c[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=function(e){return Object.keys(e._mutations)},p=function(e){return Object.keys(e._actions)},y=function(e){return e.split("/").pop()},v=["open","connection","call","close","disconnected","error"],b=["data","open","close","error"],d=["stream","close","error"],g=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=o.store,i=l(o,["store"]),g=function(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?f(n,!0).forEach(function(r){u(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}({},a,{},i),h=n(g.eventToActionTransformer,t(g.actionPrefix)),O=n(g.eventToMutationTransformer,t(g.mutationPrefix));function w(e,n){if(c){var t=O(e),o=h(e),i=s(c),a=p(c),u=r(n);i.filter(function(e){return y(e)===t}).forEach(function(e){return c.commit(e,u)}),a.filter(function(e){return y(e)===o}).forEach(function(e){return c.dispatch(e,u)})}}var m,j=function(e){b.forEach(function(r){e.on(r,function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];w(r,{dataConnection:e,args:t})})})},C=function(e){d.forEach(function(r){e.on(r,function(){for(var n=arguments.length,t=new Array(n),o=0;o<n;o++)t[o]=arguments[o];w(r,{mediaConnection:e,args:t})})})};m=j,Object.defineProperty(e,"oldConnect",{value:e.connect,writable:!0}),e.connect=function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e.oldConnect(r,n);return m(t),t},function(r){Object.defineProperty(e,"oldCall",{value:e.call,writable:!0}),e.call=function(n,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=e.oldCall(n,t,o);return r(c),c}}(C),e.on("connection",function(e){j(e)}),e.on("call",function(e){C(e)}),v.forEach(function(r){e.on(r,function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w(r,n)})})};return{install:function(r,n,t){if(!((o=n)&&e(o.on)&&e(o.call)))throw new Error("[vue-peerjs] you have to pass a `Peer` instance to the plugin");var o;g(n,t),r.prototype.$peer=n},defaults:a}});
