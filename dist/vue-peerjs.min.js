!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).VuePeerJS=r()}(this,function(){"use strict";var e=function(e){return"function"==typeof e},r=function(e){return e&&e.length<=1?e[0]:e},t=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(e){return r.reduce(function(e,r){return r(e)},e)}},n=function(e){return function(r){return e+r}},o=function(e,r){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");r=Object.assign({pascalCase:!1},r);var t;return 0===(e=Array.isArray(e)?e.map(function(e){return e.trim()}).filter(function(e){return e.length}).join("-"):e.trim()).length?"":1===e.length?r.pascalCase?e.toUpperCase():e.toLowerCase():(e!==e.toLowerCase()&&(e=function(e){for(var r=!1,t=!1,n=!1,o=0;o<e.length;o++){var i=e[o];r&&/[a-zA-Z]/.test(i)&&i.toUpperCase()===i?(e=e.slice(0,o)+"-"+e.slice(o),r=!1,n=t,t=!0,o++):t&&n&&/[a-zA-Z]/.test(i)&&i.toLowerCase()===i?(e=e.slice(0,o-1)+"-"+e.slice(o-1),n=t,t=!1,r=!0):(r=i.toLowerCase()===i&&i.toUpperCase()!==i,n=t,t=i.toUpperCase()===i&&i.toLowerCase()!==i)}return e}(e)),e=e.replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,function(e,r){return r.toUpperCase()}).replace(/\d+(\w|$)/g,function(e){return e.toUpperCase()}),t=e,r.pascalCase?t.charAt(0).toUpperCase()+t.slice(1):t)},i=o,a=o;i.default=a;var c=Object.freeze({peerPrefix:{action:"peer_",mutation:"PEER_"},dataPrefix:{action:"data_",mutation:"DATA_"},mediaPrefix:{action:"media_",mutation:"MEDIA_"},eventToMutationTransformer:function(e){return e.toUpperCase()},eventToActionTransformer:i});function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function s(e,r){if(null==e)return{};var t,n,o=function(e,r){if(null==e)return{};var t,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(o[t]=e[t]);return o}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=function(e){return Object.keys(e._mutations)},p=function(e){return Object.keys(e._actions)},y=function(e){return e.split("/").pop()},v=["open","connection","call","close","disconnected","error"],d=["data","open","close","error"],g=["stream","close","error"],b=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.store,a=s(o,["store"]),b=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?f(t,!0).forEach(function(r){u(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):f(t).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}({},c,{},a),h=function(e){return t(b.eventToMutationTransformer,n(e.mutation))},O=function(e){return t(b.eventToActionTransformer,n(e.action))};function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b.peerPrefix;if(i){var o=h(n)(e),a=O(n)(e),c=l(i),u=p(i),f=r(t);c.filter(function(e){return y(e)===o}).forEach(function(e){return i.commit(e,f)}),u.filter(function(e){return y(e)===a}).forEach(function(e){return i.dispatch(e,f)})}}var w,j=function(e){d.forEach(function(r){e.on(r,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];m(r,{dataConnection:e,args:n},b.dataPrefix)})})},C=function(e){g.forEach(function(r){e.on(r,function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];m(r,{mediaConnection:e,args:n},b.mediaPrefix)})})};w=j,Object.defineProperty(e,"peerConnect",{value:e.connect,writable:!0}),e.connect=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.peerConnect(r,t);return w(n),n},function(r){Object.defineProperty(e,"peerCall",{value:e.call,writable:!0}),e.call=function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.peerCall(t,n,o);return r(i),i}}(C),e.on("connection",function(e){j(e)}),e.on("call",function(e){C(e)}),v.forEach(function(r){e.on(r,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m(r,{args:t},b.peerPrefix)})})};return{install:function(r,t,n){if(!((o=t)&&e(o.on)&&e(o.call)))throw new Error("[vue-peerjs] you have to pass a `Peer` instance to the plugin");var o;b(t,n),r.prototype.$peer=t},defaults:c}});
